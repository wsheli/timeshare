<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>您已付款</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.6.2/css/sm.min.css">
    <link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.6.2/css/sm-extend.min.css">
    <link rel="stylesheet" href="${request.contextPath}/css/starability.css">
    <style>
        .commentAvatarDiv{
            width: 50px;
            height: 50px;
            padding:2px;
            background: #ececec;
            border-radius:50px;
            box-shadow: 0px 0px 1px rgba(0,0,0,0.4);
            -moz-border-radius: 50px;
            -webkit-border-radius: 50px;
        }
        .commentAvatarImage{
            width:50px;
            height:50px;
            line-height: 0;	 /* remove line-height */
            display: inline-block;	/* circle wraps image */
            border-radius: 50%;	/* relative value */
            -moz-border-radius: 50%;
            -webkit-border-radius: 50%;
            transition: linear 0.25s;
        }
    </style>
</head>
<body>

<input type="hidden" id="userId" value="${userId}">
<div class="page-group">
    <div class="page page-current">
        <div class="content">
            <div class="card">
                <div class="card-content">
                    <div class="list-block media-list">
                        <ul>
                            <li class="item-content">
                                <div class="item-media">
                                    <div class="commentAvatarDiv" style="width: 44px;height: 44px">
                                        <img class="commentAvatarImage" src="../images/head.jpg" style="width: 44px;height: 44px"   >
                                    </div>
                                </div>
                                <div class="item-inner">
                                    <div class="item-title-row">
                                        <div class="item-title"><span id="titleSp"></span></div>
                                    </div>
                                    <div class="item-subtitle content-padded">
                                        <div class="row">
                                            <div class="col-33"><span id="createUserNameSp" ></span></div>
                                            <div class="col-33"><span id="priceSp" >${order.price}</span>元/次</div>
                                            <div class="col-33"><span id="dateSp" >${order.optTime}</span></div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <form action="${request.contextPath}/order/save" method="post">
                <input type="hidden" id="orderId" name="orderId" value="${order.orderId}">
                <input type="hidden" id="itemId" name="itemId" value="${order.itemId}">
                <input type="hidden" id="sellerFinish" name="buyerFinish" value="true">
                <input type="hidden" id="orderStatus" name="orderStatus" value="BUYLLER_FINISH">
                <input type="hidden" id="optUserType" name="optUserType" value="buyer">
                <input type="hidden" id="orderUserId" name="orderUserId" value="${order.orderUserId}">
                <div class="list-block cards-list">
                    <ul>
                        <li class="card">
                            <div class="card-header">您的问题</div>
                            <div class="card-content">
                                <div class="card-content-inner" id="orderProblem">
                                    ${order.orderProblem}
                                </div>
                            </div>
                        </li>
                        <li class="card">
                            <div class="card-header">您的自我介绍</div>
                            <div class="card-content">
                                <div class="card-content-inner" id="orderUserDescription">
                                    ${order.orderUserDescription}
                                </div>
                            </div>
                        </li>
                        <li class="card">
                            <div class="card-header">见面时间为</div>
                            <div class="card-content">
                                <div class="card-content-inner">
                                    ${order.finalAppointmentTime!''}
                                </div>
                            </div>
                        </li>
                        <li class="card">
                            <div class="card-header">您已付款</div>
                            <div class="card-content">
                                <div class="card-content-inner">
                                    ${order.price!''}元
                                </div>
                            </div>
                        </li>
                        <li class="card">
                            <div class="card-header">卖家手机号码</div>
                            <div class="card-content">
                                <div class="card-content-inner">
                                    ${order.sellerPhone!''}
                                </div>
                            </div>
                        </li>
                        <li class="card">
                            <div class="card-header">顺便评价一下，再打个分吧</div>
                            <div class="card-content">
                                <fieldset class="starability-checkmark" style="margin: 0 auto">
                                    <input type="radio" id="rate5-6" name="rating" value="5" />
                                    <label for="rate5-6" title="Amazing">5 stars</label>

                                    <input type="radio" id="rate4-6" name="rating" value="4" />
                                    <label for="rate4-6" title="Very good">4 stars</label>

                                    <input type="radio" id="rate3-6" name="rating" value="3" />
                                    <label for="rate3-6" title="Average">3 stars</label>

                                    <input type="radio" id="rate2-6" name="rating" value="2" />
                                    <label for="rate2-6" title="Not good">2 stars</label>

                                    <input type="radio" id="rate1-6" name="rating" value="1" />
                                    <label for="rate1-6" title="Terrible">1 star</label>
                                </fieldset>
                                <div class="item-input">
                                    <textarea name="orderFeedBack" id="orderFeedBack"></textarea>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </form>

            <div class="content-block">
                <div class="row">
                    <div class="col-50"><a href="#" id="saveOrderBtn" class="button button-big button-fill button-danger">见过面了</a></div>
                    <div class="col-50"><a href="#" class="button button-big button-fill button-success">取消</a></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type='text/javascript' src='//g.alicdn.com/sj/lib/zepto/zepto.min.js' charset='utf-8'></script>
<script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.2/js/sm.min.js' charset='utf-8'></script>
<script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.2/js/sm-extend.min.js' charset='utf-8'></script>
<script>$.init()</script>
<script>
    $.showIndicator();
    var canFinish = '${canFinish}';
    if(canFinish == 'false'){
        $('#saveOrderBtn').addClass('disabled');
    }else{
        $("#saveOrderBtn").on('click', function () {
            var orderFeedBackStr = $('#orderFeedBack').val();
            if(orderFeedBackStr == ''){
                $.toast('评价一下吧');
                return ;
            }
            $.confirm('点击确定后卖家会收到您支付的款项,确定吗？',
                    function () {
                        $('form').submit();
                    }
            );

        });
    }

    $.get('${request.contextPath}/item/get-item', {itemId: $('#itemId').val()}, function (response) {
        $('#priceSp').text(response.item.price);
        $('#titleSp').text(response.item.title);
        $('.commentAvatarImage').attr("src",response.userInfo.headImgPath);
        var createDate = response.item.optTime.substring(0,10);
        $('#dateSp').text(createDate);
        $('#createUserNameSp').text(response.userInfo.nickName);
        $.hideIndicator();
    });

</script>

</body>
</html>