<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>个人信息</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.6.2/css/sm.min.css">
    <link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.6.2/css/sm-extend.min.css">
    <link rel="stylesheet" href="${request.contextPath}/css/img.css">
</head>
<body>
<div class="page-group">
    <!-- 单个page ,第一个.page默认被展示-->
    <div class="page">
        <!-- 标题栏 -->
        <header class="bar bar-nav">
            <a class="icon icon-left pull-left back"></a>
            <h1 class="title">个人信息</h1>
        </header>

        <!-- 这里是页面内容区 -->
        <div class="content">
            <a href="${request.contextPath}/user/to-upload-img">
            <div style="position: relative;margin-top: 0.5rem;" >
                <div class="commentAvatarDiv" style="position: absolute;top: 30%;left: 35%;">
                    <img class="commentAvatarImage" src="${request.contextPath}/images/default_head.jpg">
                </div>
            </div>
            </a>
            <form action="${request.contextPath}/user/save" method="post">
                <input type="hidden" id="userId" name="userId" value="${userId}">
            <div class="list-block" style="margin-top: 6rem;">
                <ul>

                    <!-- Text inputs -->
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-name"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">昵称</div>
                                <div class="item-input">
                                    <input type="text" placeholder="Your name" name="nickName" id="nickName" value="${user.nickName!''}">
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-email"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">手机号</div>
                                <div class="item-input">
                                    <input type="text" placeholder="请输入" id="mobile" name="mobile" value="${user.mobile!''}">
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-email"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">所在城市</div>
                                <div class="item-input">
                                    <input type="text" placeholder="请输入" id="city" name="city" value="${user.city!''}">
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-email"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">行业</div>
                                <div class="item-input">
                                    <input type="text" placeholder="请输入" id="industry" name="industry" value="${user.industry!''}">
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-email"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">任职机构</div>
                                <div class="item-input">
                                    <input type="text" placeholder="请输入" name="corp" id="corp" value="${user.corp!''}">
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-email"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">职位</div>
                                <div class="item-input">
                                    <input type="text" placeholder="请输入" name="position" id="position" value="${user.position!''}">
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-email"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">年龄段</div>
                                <div class="item-input">
                                    <input type="text" id="ageInput" id="ageGroup" name="ageGroup" value="${user.ageGroup!''}">
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-gender"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">性别</div>
                                <div class="item-input">
                                    <select id="sex" name="sex">
                                        <option value="1">男性</option>
                                        <option value="0">女性</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </li>
                    <!--<li class="align-top">-->
                        <!--<a class="item-content item-link" href="${request.contextPath}/user/to-upload-img">-->
                            <!--<div class="item-media"><i class="icon icon-f7"></i></div>-->
                            <!--<div class="item-inner">-->
                                <!--<div class="item-title">展示图片</div>-->
                                <!--<div class="item-after">修改</div>-->
                            <!--</div>-->
                        <!--</a>-->
                    <!--</li>-->
                </ul>
            </div>
            </form>
            <div class="content-block">
                <div class="row">
                    <div class="col-50"><a href="#" class="button button-big button-fill button-danger">取消</a></div>
                    <div class="col-50"><a href="#" id="saveUserBtn" class="button button-big button-fill button-success">提交</a></div>
                </div>
            </div>
        </div>
    </div>


</div>


<script type='text/javascript' src='//g.alicdn.com/sj/lib/zepto/zepto.min.js' charset='utf-8'></script>
<script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.2/js/sm.min.js' charset='utf-8'></script>
<script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.2/js/sm-extend.min.js' charset='utf-8'></script>
<script>
    $.get('${request.contextPath}/user/get-userinfo', {userId: $('#userId').val()}, function (response) {
        if(response && response != ''){
            $('.commentAvatarImage').attr("src",response.imageObj.imageUrl);
            $('#nickName').val(response.nickName);
            $('#mobile').val(response.mobile);
            $('#city').val(response.city);
            $('#industry').val(response.industry);
            $('#position').val(response.position);
            $('#corp').val(response.corp);
            $('#ageGroup').val(response.ageGroup);
            $('#sex').val(response.sex);
        }

    });
    $("#ageInput").picker({
        toolbarTemplate: '<header class="bar bar-nav">\
          <button class="button button-link pull-right close-picker">确定</button>\
          <h1 class="title">请选择您的年龄段</h1>\
          </header>',
                cols: [
                    {
                        textAlign: 'center',
                        values: ['60后', '70后', '80后', '90后', '00后']
                    }
                ]
            });
    function checkForm(){
        var mobile = $('#mobile').val();
        var userId = $('#userId').val();
        if(mobile.length != 11){
            $.toast('请输入正确的手机号');
            return false;
        }

//        $.get('${request.contextPath}/user/get-user-img', {userId:userId}, function (response) {
//            if(response == 'no'){
//                $.toast('请上传展示图片');
//                return false;
//            }
//        });
        return true;
    }
    $("#saveUserBtn").on('click', function () {
        var vali = checkForm();
        if(vali){
            $.showIndicator();
            $('form').submit();
        }
    });
</script>
<!-- 默认必须要执行$.init(),实际业务里一般不会在HTML文档里执行，通常是在业务页面代码的最后执行 -->
<script>$.init()</script>
</body>
</html>